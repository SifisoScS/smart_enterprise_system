@using Microsoft.AspNetCore.Components
@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<div class="page">
    <div class="sidebar">
        <div class="sidebar-header">
            <h5>Smart Enterprise</h5>
        </div>
        <nav class="sidebar-nav">
            <a href="/" class="nav-link @GetNavLinkClass("/")">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="/health" class="nav-link @GetNavLinkClass("/health")">
                <i class="fas fa-heart-pulse"></i> API Health
            </a>
            <a href="/system-info" class="nav-link @GetNavLinkClass("/system-info")">
                <i class="fas fa-info-circle"></i> System Info
            </a>
        </nav>
    </div>

    <main class="main">
        <div class="top-row px-4">
            <a href="https://docs.microsoft.com/aspnet/" target="_blank" class="btn btn-outline-primary btn-sm">About</a>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@code {
    private string GetNavLinkClass(string path)
    {
        var currentUri = new Uri(NavigationManager.Uri);
        var currentPath = currentUri.AbsolutePath.TrimEnd('/');
        var targetPath = path.TrimEnd('/');
        
        return currentPath == targetPath ? "active" : "";
    }
}